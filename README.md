# Dramini CMS - çŸ­å‰§å¹³å°ç®¡ç†åå°

ä¸€ä¸ªä¸“æ³¨äºç®¡ç†åå°çš„çŸ­å‰§å¹³å°å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å†…å®¹ç®¡ç†ã€ç”¨æˆ·æƒé™ã€å•†åŠ¡è¿è¥ç­‰åŠŸèƒ½ã€‚**ä¸ç›´æ¥æœåŠ¡å‰å°ç”¨æˆ·ï¼Œå‰å°æ•°æ®é€šè¿‡ content-api è·å–ã€‚**

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **å†…å®¹ç®¡ç†**: æ ‡é¢˜åˆ›å»ºã€é›†æ•°ç®¡ç†ã€åˆ†ç±»æ ‡ç­¾
- **æƒé™ç³»ç»Ÿ**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
- **å•†åŠ¡ç®¡ç†**: å®šä»·è®¡åˆ’ã€ä¿ƒé”€æ´»åŠ¨ã€è®¢å•ç®¡ç†
- **è¿è¥å·¥å…·**: è½¬ç é˜Ÿåˆ—ã€ä¸¾æŠ¥å¤„ç†ã€å®¡è®¡æ—¥å¿—
- **æ•°æ®åˆ†æ**: ä»ªè¡¨æ¿ã€ç»Ÿè®¡æŠ¥è¡¨

### ç³»ç»Ÿå®šä½
- **çº¯ç®¡ç†åå°**: ä¸ç›´æ¥æœåŠ¡å‰å°ç”¨æˆ·
- **æ•°æ®å†™å…¥**: æ‰€æœ‰å˜æ›´å†™å…¥å…±äº« PostgreSQL æ•°æ®åº“
- **å‰å°æ•°æ®**: é€šè¿‡ content-api è·å–ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§

### æŠ€æœ¯ç‰¹æ€§
- **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: Next.js 14 + TypeScript + Prisma
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- **æƒé™æ§åˆ¶**: ç»†ç²’åº¦çš„æƒé™ç®¡ç†
- **å®¡è®¡è¿½è¸ª**: å®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 14 (App Router), React 18, TypeScript
- **UI ç»„ä»¶**: shadcn/ui, Tailwind CSS
- **æ•°æ®è¡¨æ ¼**: TanStack Table
- **å›¾è¡¨**: Chart.js
- **è®¤è¯**: NextAuth.js
- **æ•°æ®åº“**: PostgreSQL + Prisma ORM
- **è¡¨å•éªŒè¯**: Zod
- **çŠ¶æ€ç®¡ç†**: TanStack Query

## ğŸ“¦ å®‰è£…å’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- PostgreSQL 12+
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd DraminiCMS
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥å’Œå…¶ä»–ç¯å¢ƒå˜é‡ï¼š

```env
# æ•°æ®åº“
DATABASE_URL="postgres://user:pass@localhost:5432/dramini_cms"

# NextAuth
NEXTAUTH_SECRET="your-secret-key-here"
NEXTAUTH_URL="http://localhost:3001"

# å…¶ä»–é…ç½®...
```

4. **æ•°æ®åº“è®¾ç½®**
```bash
# æ¨é€æ•°æ®åº“æ¨¡å¼
npm run db:push

# è¿è¡Œç§å­æ•°æ®
npm run db:seed
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

è®¿é—® http://localhost:3001 æŸ¥çœ‹åº”ç”¨ã€‚

### é»˜è®¤è´¦æˆ·
- é‚®ç®±: `admin@dramini.com`
- å¯†ç : `admin123`

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†åå°é¡µé¢
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”œâ”€â”€ auth/              # è®¤è¯é¡µé¢
â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†åå°ç»„ä»¶
â”‚   â””â”€â”€ ui/                # åŸºç¡€ UI ç»„ä»¶
â”œâ”€â”€ lib/                   # å·¥å…·åº“
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯é…ç½®
â”‚   â”œâ”€â”€ prisma.ts          # æ•°æ®åº“å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ permissions.ts     # æƒé™ç®¡ç†
â”‚   â””â”€â”€ utils.ts           # å·¥å…·å‡½æ•°
â”œâ”€â”€ prisma/                # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.prisma      # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ seed.ts            # ç§å­æ•°æ®
â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â””â”€â”€ middleware.ts          # Next.js ä¸­é—´ä»¶
```

## ğŸ” æƒé™ç³»ç»Ÿ

ç³»ç»Ÿé‡‡ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)ï¼š

### è§’è‰²å®šä¹‰
- **Admin**: ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
- **Editor**: å†…å®¹ç¼–è¾‘ï¼Œå¯åˆ›å»ºå’Œç¼–è¾‘å†…å®¹
- **Producer**: åˆ¶ä½œäººï¼Œè´Ÿè´£åª’ä½“ä¸Šä¼ å’Œè½¬ç 
- **Finance**: è´¢åŠ¡ï¼Œç®¡ç†å®šä»·å’Œè®¢å•
- **Viewer**: åªè¯»ç”¨æˆ·ï¼Œä»…èƒ½æŸ¥çœ‹æ•°æ®

### æƒé™åˆ—è¡¨
- `admin:all` - ç®¡ç†å‘˜å…¨æƒé™
- `content:create` - åˆ›å»ºå†…å®¹
- `content:edit` - ç¼–è¾‘å†…å®¹
- `content:publish` - å‘å¸ƒå†…å®¹
- `media:upload` - ä¸Šä¼ åª’ä½“
- `finance:view` - æŸ¥çœ‹è´¢åŠ¡
- `finance:manage` - ç®¡ç†è´¢åŠ¡
- `user:manage` - ç”¨æˆ·ç®¡ç†
- `system:settings` - ç³»ç»Ÿè®¾ç½®

## ğŸ“Š æ•°æ®æ¨¡å‹

### æ ¸å¿ƒå®ä½“
- **User**: ç”¨æˆ·ä¿¡æ¯
- **Title**: çŸ­å‰§æ ‡é¢˜
- **Episode**: é›†æ•°ä¿¡æ¯
- **Category**: åˆ†ç±»
- **Tag**: æ ‡ç­¾
- **AssetImage/AssetVideo**: åª’ä½“èµ„æº
- **Purchase**: è´­ä¹°è®°å½•
- **Subscription**: è®¢é˜…ä¿¡æ¯
- **AuditLog**: å®¡è®¡æ—¥å¿—

è¯¦ç»†çš„æ•°æ®æ¨¡å‹è¯·æŸ¥çœ‹ `prisma/schema.prisma` æ–‡ä»¶ã€‚

## ğŸš€ éƒ¨ç½²

### Vercel éƒ¨ç½² (æ¨è)

1. å°†ä»£ç æ¨é€åˆ° GitHub
2. åœ¨ Vercel ä¸­å¯¼å…¥é¡¹ç›®
3. é…ç½®ç¯å¢ƒå˜é‡
4. è¿æ¥ PostgreSQL æ•°æ®åº“
5. éƒ¨ç½²

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t dramini-cms .

# è¿è¡Œå®¹å™¨
docker run -p 3001:3001 dramini-cms
```

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **åˆ›å»ºæ•°æ®æ¨¡å‹**: åœ¨ `prisma/schema.prisma` ä¸­å®šä¹‰
2. **ç”Ÿæˆè¿ç§»**: `npm run db:migrate`
3. **åˆ›å»º API è·¯ç”±**: åœ¨ `app/api/` ä¸‹æ·»åŠ 
4. **åˆ›å»ºé¡µé¢ç»„ä»¶**: åœ¨ `app/admin/` ä¸‹æ·»åŠ 
5. **æ·»åŠ æƒé™æ§åˆ¶**: åœ¨ç›¸å…³ API å’Œç»„ä»¶ä¸­æ£€æŸ¥æƒé™

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint è§„åˆ™
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ + Hooks
- API è·¯ç”±ä½¿ç”¨ Route Handlers
- æ•°æ®åº“æ“ä½œä½¿ç”¨ Prisma

### æµ‹è¯•

```bash
# è¿è¡Œç±»å‹æ£€æŸ¥
npm run type-check

# è¿è¡Œä»£ç æ£€æŸ¥
npm run lint
```

## ğŸ“ API æ–‡æ¡£

### è®¤è¯ç›¸å…³
- `POST /api/auth/signin` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/signout` - ç”¨æˆ·ç™»å‡º

### ç®¡ç†åå° API
- `GET /api/admin/dashboard/metrics` - ä»ªè¡¨æ¿æ•°æ®
- `GET /api/admin/titles` - è·å–æ ‡é¢˜åˆ—è¡¨
- `POST /api/admin/titles` - åˆ›å»ºæ ‡é¢˜
- `GET /api/admin/titles/:id` - è·å–æ ‡é¢˜è¯¦æƒ…
- `PATCH /api/admin/titles/:id` - æ›´æ–°æ ‡é¢˜
- `DELETE /api/admin/titles/:id` - åˆ é™¤æ ‡é¢˜

æ›´å¤š API è¯¦æƒ…è¯·æŸ¥çœ‹ `app/api/` ç›®å½•ä¸‹çš„å®ç°ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Issues](../../issues) ä¸­æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜
2. åˆ›å»ºæ–°çš„ Issue æè¿°æ‚¨çš„é—®é¢˜
3. è”ç³»å¼€å‘å›¢é˜Ÿ

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] å›½é™…åŒ–æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ App
- [ ] é«˜çº§æ•°æ®åˆ†æ
- [ ] å·¥ä½œæµè‡ªåŠ¨åŒ–
- [ ] ç¬¬ä¸‰æ–¹é›†æˆ
- [ ] æ€§èƒ½ä¼˜åŒ–

---

**Dramini CMS** - è®©çŸ­å‰§å†…å®¹ç®¡ç†æ›´ç®€å• ğŸ¬
