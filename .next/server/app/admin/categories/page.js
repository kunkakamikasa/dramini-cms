(()=>{var e={};e.id=4331,e.ids=[4331],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=r(50482),s=r(69108),n=r(62563),o=r.n(n),i=r(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["admin",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9247)),"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/categories/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,66294)),"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,82917)),"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/categories/page.tsx"],u="/admin/categories/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/categories/page",pathname:"/admin/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},17418:(e,t,r)=>{Promise.resolve().then(r.bind(r,40033))},40033:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ex,dynamic:()=>ef});var a=r(95344),s=r(3729),n=r(16212),o=r(92549),i=r(61351),l=r(51838),d=r(28765),c=r(75695),u=r(38271),p=r(85222),m=r(31405),f=r(98462),x=r(99048),g=r(33183),h=r(44155),y=r(27386),j=r(31179),v=r(43234),b=r(62409),N=r(1106),w=r(71210),k=r(45904),C=r(32751),D="Dialog",[R,M]=(0,f.b)(D),[P,_]=R(D),I=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,d=s.useRef(null),c=s.useRef(null),[u,p]=(0,g.T)({prop:n,defaultProp:o??!1,onChange:i,caller:D});return(0,a.jsx)(P,{scope:t,triggerRef:d,contentRef:c,contentId:(0,x.M)(),titleId:(0,x.M)(),descriptionId:(0,x.M)(),open:u,onOpenChange:p,onOpenToggle:s.useCallback(()=>p(e=>!e),[p]),modal:l,children:r})};I.displayName=D;var S="DialogTrigger",E=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=_(S,r),o=(0,m.e)(t,n.triggerRef);return(0,a.jsx)(b.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Q(n.open),...s,ref:o,onClick:(0,p.Mj)(e.onClick,n.onOpenToggle)})});E.displayName=S;var Z="DialogPortal",[O,q]=R(Z,{forceMount:void 0}),F=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:o}=e,i=_(Z,t);return(0,a.jsx)(O,{scope:t,forceMount:r,children:s.Children.map(n,e=>(0,a.jsx)(v.z,{present:r||i.open,children:(0,a.jsx)(j.h,{asChild:!0,container:o,children:e})}))})};F.displayName=Z;var z="DialogOverlay",T=s.forwardRef((e,t)=>{let r=q(z,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,o=_(z,e.__scopeDialog);return o.modal?(0,a.jsx)(v.z,{present:s||o.open,children:(0,a.jsx)(H,{...n,ref:t})}):null});T.displayName=z;var A=(0,C.Z8)("DialogOverlay.RemoveScroll"),H=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=_(z,r);return(0,a.jsx)(w.Z,{as:A,allowPinchZoom:!0,shards:[n.contentRef],children:(0,a.jsx)(b.WV.div,{"data-state":Q(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),W="DialogContent",L=s.forwardRef((e,t)=>{let r=q(W,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,o=_(W,e.__scopeDialog);return(0,a.jsx)(v.z,{present:s||o.open,children:o.modal?(0,a.jsx)(U,{...n,ref:t}):(0,a.jsx)(V,{...n,ref:t})})});L.displayName=W;var U=s.forwardRef((e,t)=>{let r=_(W,e.__scopeDialog),n=s.useRef(null),o=(0,m.e)(t,r.contentRef,n);return s.useEffect(()=>{let e=n.current;if(e)return(0,k.Ry)(e)},[]),(0,a.jsx)($,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,p.Mj)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,p.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,p.Mj)(e.onFocusOutside,e=>e.preventDefault())})}),V=s.forwardRef((e,t)=>{let r=_(W,e.__scopeDialog),n=s.useRef(!1),o=s.useRef(!1);return(0,a.jsx)($,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(o.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),$=s.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,...l}=e,d=_(W,r),c=s.useRef(null),u=(0,m.e)(t,c);return(0,N.EW)(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.M,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,a.jsx)(h.XB,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Q(d.open),...l,ref:u,onDismiss:()=>d.onOpenChange(!1)})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea,{titleId:d.titleId}),(0,a.jsx)(es,{contentRef:c,descriptionId:d.descriptionId})]})]})}),G="DialogTitle",B=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=_(G,r);return(0,a.jsx)(b.WV.h2,{id:n.titleId,...s,ref:t})});B.displayName=G;var X="DialogDescription",Y=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=_(X,r);return(0,a.jsx)(b.WV.p,{id:n.descriptionId,...s,ref:t})});Y.displayName=X;var J="DialogClose",K=s.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=_(J,r);return(0,a.jsx)(b.WV.button,{type:"button",...s,ref:t,onClick:(0,p.Mj)(e.onClick,()=>n.onOpenChange(!1))})});function Q(e){return e?"open":"closed"}K.displayName=J;var ee="DialogTitleWarning",[et,er]=(0,f.k)(ee,{contentName:W,titleName:G,docsSlug:"dialog"}),ea=({titleId:e})=>{let t=er(ee),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return s.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},es=({contentRef:e,descriptionId:t})=>{let r=er("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return s.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(a)},[a,e,t]),null},en=r(14513),eo=r(91626);let ei=s.forwardRef(({className:e,...t},r)=>a.jsx(T,{ref:r,className:(0,eo.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ei.displayName=T.displayName;let el=s.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(F,{children:[a.jsx(ei,{}),(0,a.jsxs)(L,{ref:s,className:(0,eo.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,a.jsxs)(K,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(en.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));el.displayName=L.displayName;let ed=({className:e,...t})=>a.jsx("div",{className:(0,eo.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ed.displayName="DialogHeader";let ec=s.forwardRef(({className:e,...t},r)=>a.jsx(B,{ref:r,className:(0,eo.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));ec.displayName=B.displayName,s.forwardRef(({className:e,...t},r)=>a.jsx(Y,{ref:r,className:(0,eo.cn)("text-sm text-muted-foreground",e),...t})).displayName=Y.displayName;var eu=s.forwardRef((e,t)=>(0,a.jsx)(b.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));eu.displayName="Label";let ep=(0,r(49247).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),em=s.forwardRef(({className:e,...t},r)=>a.jsx(eu,{ref:r,className:(0,eo.cn)(ep(),e),...t}));em.displayName=eu.displayName;let ef="force-dynamic";function ex(){let[e,t]=(0,s.useState)([]),[r,p]=(0,s.useState)(!0),[m,f]=(0,s.useState)(""),[x,g]=(0,s.useState)(!1),[h,y]=(0,s.useState)(null),[j,v]=(0,s.useState)({name:"",slug:"",order:0});(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let r=await e.json();t(r)}}catch(e){console.error("Error fetching categories:",e)}finally{p(!1)}},N=async e=>{e.preventDefault();try{let e=h?`/api/categories/${h.id}`:"/api/categories";(await fetch(e,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok&&(b(),g(!1),y(null),v({name:"",slug:"",order:0}))}catch(e){console.error("Error saving category:",e)}},w=e=>{y(e),v({name:e.name,slug:e.slug,order:e.order}),g(!0)},k=async e=>{if(confirm("确定要删除这个分类吗？"))try{(await fetch(`/api/categories/${e}`,{method:"DELETE"})).ok&&b()}catch(e){console.error("Error deleting category:",e)}},C=e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.slug.toLowerCase().includes(m.toLowerCase()));return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-lg",children:"加载中..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"分类管理"}),(0,a.jsxs)(I,{open:x,onOpenChange:g,children:[a.jsx(E,{asChild:!0,children:(0,a.jsxs)(n.z,{onClick:()=>{y(null),v({name:"",slug:"",order:0})},children:[a.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"添加分类"]})}),(0,a.jsxs)(el,{children:[a.jsx(ed,{children:a.jsx(ec,{children:h?"编辑分类":"添加分类"})}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(em,{htmlFor:"name",children:"分类名称"}),a.jsx(o.I,{id:"name",value:j.name,onChange:e=>v({...j,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(em,{htmlFor:"slug",children:"URL 别名"}),a.jsx(o.I,{id:"slug",value:j.slug,onChange:e=>v({...j,slug:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(em,{htmlFor:"order",children:"排序"}),a.jsx(o.I,{id:"order",type:"number",value:j.order,onChange:e=>v({...j,order:parseInt(e.target.value)||0})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>g(!1),children:"取消"}),a.jsx(n.z,{type:"submit",children:h?"更新":"创建"})]})]})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[a.jsx(i.ll,{children:"分类列表"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(d.Z,{className:"h-4 w-4"}),a.jsx(o.I,{placeholder:"搜索分类...",value:m,onChange:e=>f(e.target.value),className:"max-w-sm"})]})]}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[C.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.slug," • 排序: ",e.order]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["创建于: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>w(e),children:a.jsx(c.Z,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>k(e.id),children:a.jsx(u.Z,{className:"h-4 w-4"})})]})]},e.id)),0===C.length&&a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"没有找到分类"})]})})]})]})}},61351:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>l});var a=r(95344),s=r(3729),n=r(91626);let o=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},92549:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var a=r(95344),s=r(3729),n=r(91626);let o=s.forwardRef(({className:e,type:t,...r},s)=>a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));o.displayName="Input"},75695:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},51838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28765:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},38271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},14513:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9247:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>d,dynamic:()=>l});var a=r(86843);let s=(0,a.createProxy)(String.raw`/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/categories/page.tsx`),{__esModule:n,$$typeof:o}=s,i=s.default,l=(0,a.createProxy)(String.raw`/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/categories/page.tsx#dynamic`),d=i}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,312,733,5724,600],()=>r(29799));module.exports=a})();