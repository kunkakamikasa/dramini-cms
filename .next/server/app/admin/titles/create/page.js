(()=>{var e={};e.id=1794,e.ids=[1794],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},47689:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=s(50482),t=s(69108),l=s(62563),i=s.n(l),n=s(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(a,d);let o=["",{children:["admin",{children:["titles",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,50652)),"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/titles/create/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,66294)),"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,78062)),"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/titles/create/page.tsx"],m="/admin/titles/create/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/titles/create/page",pathname:"/admin/titles/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},55700:(e,a,s)=>{Promise.resolve().then(s.bind(s,60039))},60039:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>f});var r=s(95344),t=s(3729),l=s(22254),i=s(16212),n=s(92549),d=s(54572),o=s(61351),c=s(17470),m=s(93601),p=s(42739),u=s(3380),x=s(31498),h=s(44669);function f(){let e=(0,l.useRouter)(),[a,s]=(0,t.useState)(!1),[f,g]=(0,t.useState)(!1),[j,y]=(0,t.useState)({name:"",slug:"",synopsis:"",categoryId:"",language:"zh",status:"DRAFT",coverImageId:"",bannerUrl:"",previewImage:""}),v=(e,a)=>{y(s=>({...s,[e]:a}))},b=async(e,a)=>{g(!0);try{let s=new FormData;s.append("file",e);let r=await fetch("/api/upload",{method:"POST",body:s});if(!r.ok)throw Error("Upload failed");let t=await r.json();"cover"===a?y(e=>({...e,coverImageId:t.imageUrl})):"banner"===a?y(e=>({...e,bannerUrl:t.imageUrl})):y(e=>({...e,previewImage:t.imageUrl})),h.ZP.success("图片上传成功！")}catch(e){h.ZP.error("图片上传失败")}finally{g(!1)}},w=async a=>{a.preventDefault(),s(!0);try{if(!(await fetch("/api/movie-library",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw Error("Failed to create title");h.ZP.success("剧目创建成功！"),e.push("/admin/content/movie-library")}catch(e){h.ZP.error("创建失败")}finally{s(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"创建新剧目"}),r.jsx("p",{className:"text-gray-600",children:"填写剧目信息并上传相关图片"})]}),(0,r.jsxs)("form",{onSubmit:w,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{children:"基本信息"})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"name",children:"剧目名称 *"}),r.jsx(n.I,{id:"name",value:j.name,onChange:e=>v("name",e.target.value),placeholder:"请输入剧目名称",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"slug",children:"URL 别名 *"}),r.jsx(n.I,{id:"slug",value:j.slug,onChange:e=>v("slug",e.target.value),placeholder:"url-friendly-name",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"synopsis",children:"剧情简介"}),r.jsx(m.g,{id:"synopsis",value:j.synopsis,onChange:e=>v("synopsis",e.target.value),placeholder:"请输入剧情简介",rows:4})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"categoryId",children:"分类"}),(0,r.jsxs)(c.Ph,{value:j.categoryId,onValueChange:e=>v("categoryId",e),children:[r.jsx(c.i4,{children:r.jsx(c.ki,{placeholder:"选择分类"})}),r.jsx(c.Bw,{children:r.jsx(c.Ql,{value:"df80afd2-1f19-4b86-9b84-a1012103668e",children:"11"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"language",children:"语言"}),(0,r.jsxs)(c.Ph,{value:j.language,onValueChange:e=>v("language",e),children:[r.jsx(c.i4,{children:r.jsx(c.ki,{})}),(0,r.jsxs)(c.Bw,{children:[r.jsx(c.Ql,{value:"zh",children:"中文"}),r.jsx(c.Ql,{value:"en",children:"English"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"status",children:"状态"}),(0,r.jsxs)(c.Ph,{value:j.status,onValueChange:e=>v("status",e),children:[r.jsx(c.i4,{children:r.jsx(c.ki,{})}),(0,r.jsxs)(c.Bw,{children:[r.jsx(c.Ql,{value:"DRAFT",children:"草稿"}),r.jsx(c.Ql,{value:"PUBLISHED",children:"已发布"})]})]})]})]})]}),(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{children:"图片设置"})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(d._,{children:"封面图片"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(n.I,{value:j.coverImageId,onChange:e=>v("coverImageId",e.target.value),placeholder:"封面图片URL",type:"url"}),r.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];a&&b(a,"cover")},className:"hidden",id:"cover-upload"}),(0,r.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>document.getElementById("cover-upload")?.click(),disabled:f,children:[f?r.jsx(p.Z,{className:"h-4 w-4 animate-spin"}):r.jsx(u.Z,{className:"h-4 w-4"}),"上传"]})]}),j.coverImageId&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:j.coverImageId,alt:"封面预览",className:"w-32 h-20 object-cover rounded"})})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{children:"16:9轮播图 (可选)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(n.I,{value:j.bannerUrl,onChange:e=>v("bannerUrl",e.target.value),placeholder:"16:9轮播图URL",type:"url"}),r.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];a&&b(a,"banner")},className:"hidden",id:"banner-upload"}),(0,r.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>document.getElementById("banner-upload")?.click(),disabled:f,children:[f?r.jsx(p.Z,{className:"h-4 w-4 animate-spin"}):r.jsx(u.Z,{className:"h-4 w-4"}),"上传"]})]}),j.bannerUrl&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:j.bannerUrl,alt:"轮播图预览",className:"w-32 h-18 object-cover rounded"})})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{children:"首页预览图"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(n.I,{value:j.previewImage,onChange:e=>v("previewImage",e.target.value),placeholder:"首页预览图URL",type:"url"}),r.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];a&&b(a,"preview")},className:"hidden",id:"preview-upload"}),(0,r.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>document.getElementById("preview-upload")?.click(),disabled:f,children:[f?r.jsx(p.Z,{className:"h-4 w-4 animate-spin"}):r.jsx(u.Z,{className:"h-4 w-4"}),"上传"]})]}),j.previewImage&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:j.previewImage,alt:"预览图",className:"w-32 h-20 object-cover rounded"})})]})]})]})]}),r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{children:"操作"})}),r.jsx(o.aY,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(i.z,{type:"submit",className:"w-full",disabled:a,children:[a&&r.jsx(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),r.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"创建剧目"]}),r.jsx(i.z,{type:"button",variant:"outline",className:"w-full",onClick:()=>e.back(),children:"取消"})]})})]})})]})]})}},61351:(e,a,s)=>{"use strict";s.d(a,{Ol:()=>n,SZ:()=>o,Zb:()=>i,aY:()=>c,ll:()=>d});var r=s(95344),t=s(3729),l=s(91626);let i=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card";let n=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let d=t.forwardRef(({className:e,...a},s)=>r.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));d.displayName="CardTitle";let o=t.forwardRef(({className:e,...a},s)=>r.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));o.displayName="CardDescription";let c=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},92549:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});var r=s(95344),t=s(3729),l=s(91626);let i=t.forwardRef(({className:e,type:a,...s},t)=>r.jsx("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));i.displayName="Input"},54572:(e,a,s)=>{"use strict";s.d(a,{_:()=>c});var r=s(95344),t=s(3729),l=s(62409),i=t.forwardRef((e,a)=>(0,r.jsx)(l.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=s(49247),d=s(91626);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef(({className:e,...a},s)=>r.jsx(i,{ref:s,className:(0,d.cn)(o(),e),...a}));c.displayName=i.displayName},17470:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>h,Ph:()=>c,Ql:()=>f,i4:()=>p,ki:()=>m});var r=s(95344),t=s(3729),l=s(70568),i=s(25390),n=s(12704),d=s(62312),o=s(91626);let c=l.fC;l.ZA;let m=l.B4,p=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(l.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,r.jsx(l.JO,{asChild:!0,children:r.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.xz.displayName;let u=t.forwardRef(({className:e,...a},s)=>r.jsx(l.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(n.Z,{className:"h-4 w-4"})}));u.displayName=l.u_.displayName;let x=t.forwardRef(({className:e,...a},s)=>r.jsx(l.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=l.$G.displayName;let h=t.forwardRef(({className:e,children:a,position:s="popper",...t},i)=>r.jsx(l.h_,{children:(0,r.jsxs)(l.VY,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...t,children:[r.jsx(u,{}),r.jsx(l.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),r.jsx(x,{})]})}));h.displayName=l.VY.displayName,t.forwardRef(({className:e,...a},s)=>r.jsx(l.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=l.__.displayName;let f=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(l.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(l.wU,{children:r.jsx(d.Z,{className:"h-4 w-4"})})}),r.jsx(l.eT,{children:a})]}));f.displayName=l.ck.displayName,t.forwardRef(({className:e,...a},s)=>r.jsx(l.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=l.Z0.displayName},93601:(e,a,s)=>{"use strict";s.d(a,{g:()=>i});var r=s(95344),t=s(3729),l=s(91626);let i=t.forwardRef(({className:e,...a},s)=>r.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));i.displayName="Textarea"},42739:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},31498:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},3380:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},50652:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>l,__esModule:()=>t,default:()=>i});let r=(0,s(86843).createProxy)(String.raw`/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/admin/titles/create/page.tsx`),{__esModule:t,$$typeof:l}=r,i=r.default}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[1638,412,2284,5724,2391,8309],()=>s(47689));module.exports=r})();