"use strict";(()=>{var e={};e.id=1397,e.ids=[1397],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},37009:(e,i,r)=>{r.r(i),r.d(i,{headerHooks:()=>h,originalPathname:()=>F,patchFetch:()=>y,requestAsyncStorage:()=>v,routeModule:()=>l,serverHooks:()=>P,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var t={};r.r(t),r.d(t,{DELETE:()=>c,GET:()=>u,PATCH:()=>p});var s=r(95419),o=r(69108),d=r(99678),a=r(78070),n=r(3214);async function u(e,{params:i}){try{let e=await n._.episodes.findUnique({where:{id:i.id},include:{titles:{select:{id:!0,name:!0,slug:!0}}}});if(!e)return a.Z.json({error:"Episode not found"},{status:404});let r={...e,episodeNum:e.epNumber,duration:e.durationSec,videoUrl:e.videoId,isOnline:e.isFreePreview,epNumber:e.epNumber,durationSec:e.durationSec,videoId:e.videoId,isFreePreview:e.isFreePreview};return a.Z.json(r)}catch(e){return a.Z.json({error:"Failed to fetch episode"},{status:500})}}async function p(e,{params:i}){try{let r=await e.json(),t={};void 0!==r.episodeNum&&(t.epNumber=r.episodeNum),void 0!==r.name&&(t.name=r.name),void 0!==r.duration&&(t.durationSec=r.duration),void 0!==r.videoUrl&&(t.videoId=r.videoUrl),void 0!==r.isOnline&&(t.isFreePreview=r.isOnline),void 0!==r.isFreePreview&&(t.isFreePreview=r.isFreePreview),void 0!==r.isFree&&(t.isFree=r.isFree),void 0!==r.episodePrice&&(t.episodePrice=r.episodePrice?Math.round(100*parseFloat(r.episodePrice)):null),void 0!==r.priceCurrency&&(t.priceCurrency=r.priceCurrency),void 0!==r.status&&(t.status=r.status);let s=await n._.episodes.update({where:{id:i.id},data:t,include:{titles:{select:{id:!0,name:!0,slug:!0}}}});return a.Z.json(s)}catch(e){return a.Z.json({error:"Failed to update episode"},{status:500})}}async function c(e,{params:i}){try{return await n._.episodes.delete({where:{id:i.id}}),a.Z.json({success:!0})}catch(e){return a.Z.json({error:"Failed to delete episode"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/episodes/[id]/route",pathname:"/api/episodes/[id]",filename:"route",bundlePath:"app/api/episodes/[id]/route"},resolvedPagePath:"/Users/mayingkun/mkwork/cursorproject/H5/DraminiCMS/app/api/episodes/[id]/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:v,staticGenerationAsyncStorage:m,serverHooks:P,headerHooks:h,staticGenerationBailout:w}=l,F="/api/episodes/[id]/route";function y(){return(0,d.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:m})}},3214:(e,i,r)=>{r.d(i,{_:()=>s});var t=r(53524);let s=globalThis.prisma??new t.PrismaClient}};var i=require("../../../../webpack-runtime.js");i.C(e);var r=e=>i(i.s=e),t=i.X(0,[1638,6206],()=>r(37009));module.exports=t})();